(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},101:function(e,t){},102:function(e,t){},103:function(e,t){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(45),r=a.n(o),l=a(5),s=a(6);function u(){return c.a.createElement("div",null,c.a.createElement("h1",null,"Welcome to eBook Library"))}var i=a(11),m=a.n(i),p=a(17),b=a(4),d=Object(n.createContext)(),E=function(e){var t=e.children,a=Object(n.useState)(null),o=Object(b.a)(a,2),r=o[0],l=o[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),i=u[0],m=u[1],p=Object(n.useState)(!1),E=Object(b.a)(p,2),h=E[0],v=E[1],f=Object(n.useState)(!1),g=Object(b.a)(f,2),k=g[0],j=g[1],O=Object(n.useState)([]),N=Object(b.a)(O,2),A=N[0],x=N[1],C=Object(n.useState)(""),S=Object(b.a)(C,2),y=S[0],w=S[1],I=Object(n.useState)(""),B=Object(b.a)(I,2),P=B[0],D=B[1];return c.a.createElement(d.Provider,{value:{token:r,setToken:l,cookies:i,setCookies:m,isAuth:h,setIsAuth:v,isAdmin:k,setIsAdmin:j,userData:P,setUserData:D,books:A,setBooks:x,msg:y,setMsg:w}},t)};a(28);function h(){var e=Object(n.useContext)(d),t=e.isAuth,a=e.setIsAuth,o=e.setIsAdmin,r=e.token,l=e.setToken,u=e.setCookies,i=e.setUserData,E=Object(n.useState)(null),h=Object(b.a)(E,2),v=h[0],f=h[1],g=Object(n.useState)(null),k=Object(b.a)(g,2),j=k[0],O=k[1];Object(n.useEffect)((function(){}),[]);var N=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,c,s,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:v,password:j},c={method:"POST",headers:{"Content-Type":"application/json","x-auth":r},body:JSON.stringify(n)},e.next=5,fetch("http://localhost:5000/users/login",c);case 5:return s=e.sent,console.log("login response:",s),e.next=9,s.json();case 9:p=e.sent,console.log("login data:",p),"Admin"===p.user.role?o(!0):o(!1),p.success?(a(!0),u(!0),l(p.token),i(p.user)):(alert("wrong login data"),a(!1)),console.log(s.headers.get("x-auth"));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"login-container"},t?c.a.createElement(s.a,{to:"/account"}):c.a.createElement("div",{className:"form-container"},c.a.createElement("h2",null,"Login"),c.a.createElement("form",{onSubmit:N},c.a.createElement("input",{type:"text",name:"email",placeholder:"Enter Email",onChange:function(e){return f(e.target.value)},required:!0}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:function(e){return O(e.target.value)},required:!0}),c.a.createElement("button",{type:"submit"},"Login"))))}function v(){var e=Object(n.useContext)(d),t=e.isAuth,a=e.setIsAuth,o=e.setIsAdmin,r=e.token,l=e.setToken,u=e.setCookies,i=e.setUserData,E=Object(n.useState)(null),h=Object(b.a)(E,2),v=h[0],f=h[1],g=Object(n.useState)(null),k=Object(b.a)(g,2),j=k[0],O=k[1],N=Object(n.useState)(null),A=Object(b.a)(N,2),x=A[0],C=A[1],S=Object(n.useState)("User"),y=Object(b.a)(S,1)[0];Object(n.useEffect)((function(){}),[]);var w=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,c,s,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={userName:v,email:j,password:x,role:y},c={method:"POST",headers:{"Content-Type":"application/json","x-auth":r},body:JSON.stringify(n)},e.next=5,fetch("http://localhost:5000/users",c);case 5:return s=e.sent,e.next=8,s.json();case 8:p=e.sent,console.log(s.headers.get("x-auth")),""!==v&&""!==j&&""!==x||alert("Please fill in all input fields."),(null==x||x.length<6)&&alert("The password should have at least 6 characters."),(null==j||j.indexOf("@")<1&&j.lastIndexOf(".")<2)&&alert("Please enter correct email."),"Admin"===p.user.role?o(!0):o(!1),p.success?(alert("Your account was created successful."),a(!0),u(!0),l(p.token),i(p.user),localStorage.setItem("login",!0),localStorage.setItem("id",p.user._id)):alert("Your account can not be created. Please check if all input data is correct.");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"form-container"},c.a.createElement("h2",null,"Sign up"),t?c.a.createElement(s.a,{to:"/account"}):c.a.createElement("form",{onSubmit:w},c.a.createElement("input",{type:"text",name:"userName",placeholder:"* Enter Name",required:!0,minLength:"2",maxLength:"15",onChange:function(e){return f(e.target.value)}}),c.a.createElement("input",{type:"email",name:"email",placeholder:"* Enter Email",required:!0,onChange:function(e){return O(e.target.value)}}),c.a.createElement("input",{type:"password",name:"password",placeholder:"* Enter Password",required:!0,minLength:"6",maxLength:"20",onChange:function(e){return C(e.target.value)}}),c.a.createElement("button",{type:"submit"},"Sign up")))}function f(){var e=Object(n.useContext)(d),t=e.isAuth;return(0,e.setIsAuth)(!1),t?c.a.createElement("div",{className:"component-container"},c.a.createElement("p",null,"You are logged out.")):c.a.createElement(s.a,{to:"/login"})}function g(){var e=Object(n.useContext)(d),t=e.isAuth,a=e.isAdmin;return c.a.createElement("div",{className:"account"},t?a?c.a.createElement(s.a,{to:"/admin"}):c.a.createElement(s.a,{to:"/userAccount"}):c.a.createElement(s.a,{to:"/login"}))}function k(){var e=Object(n.useContext)(d),t=e.isAuth,a=e.userData;return t?c.a.createElement("div",{className:"component-container user-account"},c.a.createElement("h2",null,a.userName,", welcome to the ebook library"),c.a.createElement("h3",null,"User Data"),c.a.createElement("p",null,"User name: ",a.userName," "),c.a.createElement("p",null,"Email: ",a.email," ")):c.a.createElement(s.a,{to:"/login"})}var j=a(47),O=a.n(j);function N(){var e=Object(n.useContext)(d),t=e.isAdmin,a=e.isAuth,o=e.token,r=Object(n.useState)(""),l=Object(b.a)(r,2),u=l[0],i=l[1],E=Object(n.useState)(""),h=Object(b.a)(E,2),v=h[0],f=h[1],g=Object(n.useState)(""),k=Object(b.a)(g,2),j=k[0],N=k[1],A=Object(n.useState)(""),x=Object(b.a)(A,2),C=x[0],S=x[1],y=Object(n.useState)(""),w=Object(b.a)(y,2),I=w[0],B=w[1],P=Object(n.useState)(""),D=Object(b.a)(P,2),L=D[0],T=D[1],U=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("title",u),a.append("description",v),a.append("author",j),a.append("year",C),a.append("file",I),a.append("cover",L),console.log("bookData:",a),e.prev=9,e.next=12,O.a.post("/books",a,{headers:{"Content-Type":"multipart/form-data","x-auth":o}});case 12:(n=e.sent).status&&console.log("server response:",n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"component-container "},t&&a?c.a.createElement("div",null,c.a.createElement("form",{onSubmit:U,encType:"multipart/form-data",className:"add-book"},c.a.createElement("input",{type:"text",name:"title",onChange:function(e){return i(e.target.value)},placeholder:"title"}),c.a.createElement("input",{type:"text",name:"description",onChange:function(e){return f(e.target.value)},placeholder:"description"}),c.a.createElement("input",{type:"text",name:"author",onChange:function(e){return N(e.target.value)},placeholder:"author"}),c.a.createElement("input",{type:"text",name:"year",onChange:function(e){return S(e.target.value)},placeholder:"year"}),c.a.createElement("label",{htmlFor:"book-file"},"Book File"),c.a.createElement("input",{type:"file",name:"file",id:"book-file",placeholder:"Only .pdf",onChange:function(e){return B(e.target.files[0])}}),c.a.createElement("label",{htmlFor:"book-cover"},"Book Cover"),c.a.createElement("input",{type:"file",name:"cover",id:"book-cover",placeholder:"Only .png or .jpeg",onChange:function(e){return T(e.target.files[0])}}),c.a.createElement("button",{type:"submit",className:"btn btn-submit"},"add book"))):c.a.createElement(s.a,{to:"/login"}))}function A(){var e=Object(n.useContext)(d),t=e.isAdmin,a=e.isAuth;return c.a.createElement("div",{className:"component-container "},t&&a?c.a.createElement("h3",null,"edit book"):c.a.createElement(s.a,{to:"/login"}))}function x(){var e=Object(n.useContext)(d),t=e.isAdmin,a=e.isAuth;return c.a.createElement("div",{className:"component-container "},t&&a?c.a.createElement("h3",null,"delete book"):c.a.createElement(s.a,{to:"/login"}))}function C(){var e=Object(n.useContext)(d),t=e.isAdmin,a=e.isAuth,o=e.token,r=Object(n.useState)(null),u=Object(b.a)(r,2),i=u[0],m=u[1];return fetch("http://localhost:5000/users",{headers:{"content-type":"application/json","x-auth":o}}).then((function(e){return e.json()})).then((function(e){m(e.users)})),c.a.createElement("div",{className:"component-container users"},c.a.createElement("h2",null,"Users"),t&&a?c.a.createElement(c.a.Fragment,null,i&&i.map((function(e){return c.a.createElement("div",{key:e._id,className:"user"},c.a.createElement("h3",null,e.userName),c.a.createElement("p",null,e.email))})),c.a.createElement(l.b,{to:"/admin",className:"link-btn"},"go back")):c.a.createElement(s.a,{to:"/login"}))}function S(){return c.a.createElement("div",null,c.a.createElement("nav",{className:"admin-nav"},c.a.createElement("h3",null,"manage books"),c.a.createElement(l.c,{className:"main-nav-link",to:"/add-book",exact:!0,activeClassName:"active"},"add ebook"),c.a.createElement(l.c,{className:"main-nav-link",to:"/edit-book",exact:!0,activeClassName:"active"},"edit ebook"),c.a.createElement(l.c,{className:"main-nav-link",to:"/delete-book",exact:!0,activeClassName:"active"},"delete ebook"),c.a.createElement("h3",null,"manage users"),c.a.createElement(l.c,{className:"main-nav-link",to:"/users",activeClassName:"active"},"Users")),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/add-book",component:N}),c.a.createElement(s.b,{path:"/edit-book",component:A}),c.a.createElement(s.b,{path:"/delete-book",component:x}),c.a.createElement(s.b,{path:"/users",component:C})))}a(78);function y(){var e=Object(n.useContext)(d),t=e.isAdmin,a=e.isAuth;return c.a.createElement("div",{className:"admin"},t&&a?c.a.createElement("div",null,c.a.createElement("h2",null,"hallo admin"),c.a.createElement(S,null)):c.a.createElement(s.a,{to:"/login"}))}var w=a(15);function I(e){w.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(w.c.version,"/pdf.worker.js");var t=Object(n.useContext)(d),a=(t.isAuth,t.userData,t.books,t.setBooks,Object(n.useState)(null)),o=Object(b.a)(a,2),r=o[0],l=o[1],s=Object(n.useState)(1),u=Object(b.a)(s,2),i=u[0];u[1];console.log("PROPS:",e),console.log("test:",e.location.state),console.log("path:",e.location.state.bookpath);var m=e.location.state.bookpath;console.log("pathname:",m);return console.log("book props:",e),c.a.createElement("div",null,c.a.createElement(w.a,{file:m,onLoadError:function(e){var t=e.numPages;l(t)}},c.a.createElement(w.b,{pageNumber:i})),c.a.createElement("p",null,"Page ",i," of ",r))}a(44);var B=a(49),P=a.n(B);var D=Object(s.g)((function(){var e=Object(n.useContext)(d),t=(e.isAuth,e.books),a=e.setBooks;return console.log("before E----book:",t),Object(n.useEffect)((function(){fetch("http://localhost:5000/books").then((function(e){return e.json()})).then((function(e){a(e.books)}))}),[]),console.log("after E----book:",t),c.a.createElement("div",{className:"book-container"},c.a.createElement("div",{className:"book-list"},t&&t.map((function(e){return c.a.createElement("div",{key:e._id,className:"book"},c.a.createElement("h3",null,e.title),c.a.createElement("div",{className:"img-div"},c.a.createElement("img",{src:e.cover?e.cover:P.a,alt:"Book cover",width:"155",height:"250"})),c.a.createElement("p",null,e.description),c.a.createElement("p",null,e.author),c.a.createElement("p",null,e.year),c.a.createElement(l.b,{to:{pathname:"/read-book/".concat(e._id),state:{bookpath:e.path}},className:"btn-read-book"},"book"))}))))}));function L(){return c.a.createElement("div",{className:"component-container"},c.a.createElement("h2",{className:"not-found-msg"},"404"),c.a.createElement("p",null,"Sorry, the page is not found."))}var T=a(50),U=a.n(T);function q(e){w.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(w.c.version,"/pdf.worker.js");var t=Object(n.useContext)(d),a=(t.isAuth,t.userData,t.books,t.setBooks,Object(n.useState)(null)),o=Object(b.a)(a,2),r=o[0],l=o[1],s=Object(n.useState)(1),u=Object(b.a)(s,2),i=u[0];u[1];return c.a.createElement("div",null,c.a.createElement("h2",null,"Book"),c.a.createElement(w.a,{file:U.a,onLoadSuccess:function(e){var t=e.numPages;l(t)}},c.a.createElement(w.b,{pageNumber:i})),c.a.createElement("p",null,"Page ",i," of ",r))}function F(){var e=Object(n.useContext)(d),t=e.isAuth,a=e.setIsAuth,o=e.isAdmin,r=e.setIsAdmin,l=e.books,i=e.setBooks;return c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:u}),c.a.createElement(s.b,{path:"/ebooks",render:function(e){return c.a.createElement(D,Object.assign({},e,{isAuth:t,setIsAuth:a}))}}),c.a.createElement(s.b,{path:"/login",render:function(e){return c.a.createElement(h,Object.assign({},e,{isAuth:t,setIsAuth:a}))}}),c.a.createElement(s.b,{path:"/signup",component:v}),c.a.createElement(s.b,{path:"/account",render:function(e){return c.a.createElement(g,Object.assign({},e,{isAuth:t,setIsAuth:a}))}}),c.a.createElement(s.b,{path:"/admin",render:function(e){return c.a.createElement(y,Object.assign({},e,{isAuth:t,setIsAuth:a,isAdmin:o,setIsAdmin:r}))}}),c.a.createElement(s.b,{path:"/userAccount",render:function(e){return c.a.createElement(k,Object.assign({},e,{isAuth:t,setIsAuth:a}))}}),c.a.createElement(s.b,{path:"/logout",render:function(e){return c.a.createElement(f,Object.assign({},e,{isAuth:t,setIsAuth:a}))}}),c.a.createElement(s.b,{path:"/book",render:function(e){return c.a.createElement(q,Object.assign({},e,{isAuth:t,setIsAuth:a,books:l,setBooks:i}))}}),c.a.createElement(s.b,{path:"/read-book/:id",render:function(e){return c.a.createElement(I,Object.assign({},e,{isAuth:t,setIsAuth:a,books:l,setBooks:i}))}}),c.a.createElement(s.b,{path:"/add-book",component:N}),c.a.createElement(s.b,{path:"/edit-book",component:A}),c.a.createElement(s.b,{path:"/delete-book",component:x}),c.a.createElement(s.b,{path:"/users",component:C}),c.a.createElement(s.b,{component:L}))}var J=a(51),_=a.n(J);a(104);function M(){var e=Object(n.useContext)(d).isAuth;return c.a.createElement("div",null,c.a.createElement("nav",{className:"main-nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/",exact:!0,activeClassName:"active"},"Home")),e?c.a.createElement("div",{className:"nav-li-div"},c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/ebooks",activeClassName:"active"},"eBooks")),c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/account",activeClassName:"active"},"My Account")),c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/logout",activeClassName:"active"},"Logout"))):c.a.createElement("div",{className:"nav-li-div"},c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/login",activeClassName:"active"},"Login")),c.a.createElement("li",null,c.a.createElement(l.c,{className:"main-nav-link",to:"/signup",activeClassName:"active"},"Sign up"))))))}function W(){return c.a.createElement("header",null,c.a.createElement("img",{src:_.a,className:"App-logo",alt:"logo"}),c.a.createElement(M,null))}a(105);var Y=function(){return c.a.createElement(E,null,c.a.createElement(l.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(W,null),c.a.createElement("div",{className:"app-container"},c.a.createElement(F,null)))))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Y,null)),document.getElementById("root"))},28:function(e,t,a){},44:function(e,t,a){},49:function(e,t,a){e.exports=a.p+"static/media/default-cover-book.d2850a53.png"},50:function(e,t,a){e.exports=a.p+"static/media/8ba7955af53e9a57c23b0477526a09c3.3a19a0ae.bin"},51:function(e,t,a){e.exports=a.p+"static/media/ebook.3c124085.svg"},52:function(e,t,a){e.exports=a(106)},78:function(e,t,a){},99:function(e,t){}},[[52,1,2]]]);
//# sourceMappingURL=main.7ea37fbc.chunk.js.map